# ======= è¯´æ˜ ======= #
# æ›´æ–°æ—¶é—´ï¼šQuantumult Xå°ç™½é…ç½® åˆ¶ä½œ by Jesse 20240525
# ä¸»è¦æ ¹æ®@ddgksf2013ä¿®æ”¹
# > è¯·åœ¨ã€Œè®¾ç½®ã€-ã€ŒGeoLite2èµ„æ–™åº“ã€-ã€Œå›½å®¶ã€-ã€ŒURLã€å¡«å†™ä¸‹é¢é“¾æ¥
# https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb

# ======= æ³¨é‡Š ======= #
# > Shadowrocketæ‰“å¼€HTTPSè§£å¯†æ–¹æ³•ï¼š
# > 1 ç‚¹å‡»é…ç½®æ–‡ä»¶â“˜ - HTTPSè§£å¯† - è¯ä¹¦ - ç”Ÿæˆæ–°çš„CAè¯ä¹¦ - å®‰è£…è¯ä¹¦
# > 2 æ‰‹æœºè®¾ç½® - å·²ä¸‹è½½æè¿°æ–‡ä»¶ - å®‰è£…
# > 3 æ‰‹æœºè®¾ç½® - é€šç”¨ - å…³äºæœ¬æœº - è¯ä¹¦ä¿¡ä»»è®¾ç½® - å¼€å¯å¯¹åº”Shadowrocketè¯ä¹¦ä¿¡ä»»

[General]
bypass-system = true
doh-server = https://dns.alidns.com/dns-query,https://doh.pub/dns-query
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
dns-server = 119.29.29.29, 114.114.114.114, 223.5.5.5, system
fallback-dns-server = system
ipv6 = false

[Proxy Group]
# ======= æ³¨é‡Š ======= #
# è¯¥é…ç½®ç­–ç•¥ç»„å¯å®ç°ç‰¹å®šè§„åˆ™èµ°æŒ‡å®šç­–ç•¥æˆ–èŠ‚ç‚¹ï¼›å¦‚æƒ³è®©netflixèµ°æ–°åŠ å¡èŠ‚ç‚¹ é‚£ä¹ˆå¯ä»¥åœ¨ç›¸åº”ä»£ç†åˆ†ç»„é‡Œå‹¾é€‰æ–°åŠ å¡èŠ‚ç‚¹ï¼›
# æ›´æ”¹ä»£ç†åˆ†ç»„ç­–ç•¥çš„æ­¥éª¤(ä»¥ğŸ¥ Netflixç­–ç•¥ä¸ºä¾‹)ï¼šç‚¹å‡»ç•Œé¢åº•éƒ¨é…ç½®--ç‚¹å‡»é…ç½®æ–‡ä»¶"â“˜"ç¬¦å·---ä»£ç†åˆ†ç»„---ç‚¹å‡»ğŸ¥ Netflixç­–ç•¥çš„"â“˜"ç¬¦å·---å‹¾é€‰ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹--ä¿å­˜ã€‚(æ–°ç‰ˆå°ç«ç®­åªéœ€é¦–é¡µä¸‹æ‹‰å³å¯è°ƒå‡ºä»£ç†åˆ†ç»„ç•Œé¢ï¼‰

# â™»ï¸ ALLç­–ç•¥è¡¨ç¤ºå¯¹æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œæµ‹é€Ÿå¹¶é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹ï¼›æµ‹é€Ÿé—´éš”600ç§’ï¼Œå®¹å·®100msï¼›
# è‹¥ä¸æƒ³ç”¨æŸäº›ç‰¹å®šèŠ‚ç‚¹ å¯ä»¥é€šè¿‡æ­£åˆ™æ’é™¤ ä¾‹ï¼šâ™»ï¸ ALL = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=^(?!.*?(å›½å†…|é™é€Ÿ|è¯•ç”¨)).*$
# ä¹Ÿå¯ä»¥è®©æŒ‡å®šæœºåœºå‚ä¸â™»ï¸ ALLç­–ç•¥é‡Œçš„æµ‹é€Ÿï¼ˆæ ¹æ®ä½ è®¾ç½®çš„æœºåœºè®¢é˜…åç§°è€Œå®š è¿™é‡Œä¸ä¸¾ä¾‹ï¼‰

# ======= æ‰‹åŠ¨ ======= #
ğŸš€ å…¨çƒåŠ é€Ÿ = select,PROXY, ğŸ¤–ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
ğŸ è‹¹æœæœåŠ¡ = select,DIRECT,PROXY, ğŸ¤–ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
ğŸ” å›½å†…åª’ä½“ = select,DIRECT,PROXY, ğŸ¤–ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
ğŸ¿ å›½é™…åª’ä½“ = select,DIRECT,PROXY, ğŸ¤–ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
ğŸ¤–ï¸ å…œåº•åˆ†æµ = select,DIRECT,PROXY, ğŸ¤–ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=2,url=http://www.gstatic.com/generate_204

# ======= è‡ªåŠ¨ ======= #
ğŸ¤–ï¸ è‡ªåŠ¨é€‰æ‹© = url-test,select=0,url=http://www.gstatic.com/generate_204,policy-regex-filter=^(.(?!(ç½‘æ˜“|å¢¨é±¼)))*$,timeout=5,tolerance=0,interval=600
ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ = url-test,select=0,url=http://www.gstatic.com/generate_204,policy-regex-filter=(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$,timeout=5,tolerance=0,interval=600
ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹ = url-test,select=0,url=http://www.gstatic.com/generate_204,policy-regex-filter=(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$,timeout=5,tolerance=0,interval=600
ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ = url-test,select=0,url=http://www.gstatic.com/generate_204,policy-regex-filter=(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$,timeout=5,tolerance=0,interval=600
ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹ = url-test,select=0,url=http://www.gstatic.com/generate_204,policy-regex-filter=(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$,timeout=5,tolerance=0,interval=600
ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹ = url-test,select=0,url=http://www.gstatic.com/generate_204,policy-regex-filter=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$,timeout=5,tolerance=0,interval=600

[Rule]
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Direct/Direct.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules.list, REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Apple/Apple.list,ğŸ è‹¹æœæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,ğŸš€ å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,ğŸš€ å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,ğŸš€ å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,ğŸš€ å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,ğŸš€ å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/WeChat/WeChat.list,ğŸ” å›½å†…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Proxy/Proxy.list,ğŸ¿ å›½å¤–åª’ä½“
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Proxy/Proxy_Domain.list,ğŸ¿ å›½å¤–åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GlobalMedia/GlobalMedia.list,ğŸ¿ å›½å¤–åª’ä½“
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GlobalMedia/GlobalMedia_Domain.list,ğŸ¿ å›½å¤–åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/ChinaMedia/ChinaMedia.list,ğŸ” å›½å†…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/AsianMedia/AsianMedia.list,ğŸ” å›½å†…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list,ğŸ¿ å›½å¤–åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/China/China.list,ğŸ” å›½å†…åª’ä½“
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/China/China_Domain.list,ğŸ” å›½å†…åª’ä½“
GEOIP,CN,DIRECT
FINAL,å…œåº•åˆ†æµ

[Host]
*testflight.apple.com = server:8.8.4.4

[URL Rewrite]
# ======= Googleæœç´¢é‡å†™  ======= #
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

# ======= æ²¹ç®¡è§†é¢‘å¹¿å‘Šè¯·æ±‚ ======= #
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302 
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject

# ======= éœ€è¦æ‰‹åŠ¨æ·»åŠ æ¨¡å— ====== #
# > 1 Youtubeå»å¹¿å‘ŠåŠåŠŸèƒ½å¢å¼º https://github.com/Maasea/sgmodule/raw/master/YouTube.Enhance.sgmodule
# > 2 å¢¨é±¼å»å¹¿å‘Šåˆé›†[å¼€å±2.0|é«˜å¾·åœ°å›¾|å¾®ä¿¡å°ç¨‹åº|Bç«™|èœé¸Ÿè£¹è£¹|bing|keep|ç½‘æ˜“äº‘|éšæ‰‹è®°|å¾®ä¿¡å…¬ä¼—å·|å°çº¢ä¹¦|å–œé©¬æ‹‰é›…|çŸ¥ä¹|Pixiv|é…·å®‰|ç™¾åº¦åœ°å›¾]  https://whatshub.top/module/startingad.module
# > 3 çŒ«çŒ«VIPè§£é”åˆé›† https://github.com/ddgksf2013/Modules/raw/main/RevenueCat.Vip.sgmodule
# > 4 SpotifyéŸ³ä¹VIP  https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.module

[MITM]
# > Shadowrocketä»…ä¼šè§£å¯†hostnameæŒ‡å®šçš„åŸŸåçš„è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‰ç¼€ - æ’é™¤ç‰¹å®šä¸»æœºåï¼Œå¦‚ -*.example.com
# > iOSç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦ï¼Œå¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜ï¼Œå¦‚ *.apple.comï¼Œ*.icloud.comã€‚
hostname = *.googlevideo.com, *.google.cn, -*.apple.com, -consumer.fcbox.com, -*huami.com, -weather-data.apple.com, -*amemv.com, -*snssdk.com, -www.google.com, -*snssdk.com, -*amemv.com

ca-passphrase = 
ca-p12 = 
enable = true
